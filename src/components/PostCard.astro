---
import { formatDate, type PostEntry } from '../lib/posts';

interface Props {
	post: PostEntry;
	compact?: boolean;
}

const { post, compact = false } = Astro.props;
const href = `/${post.slug}`;
---

<article class:list={['post-card', compact && 'post-card-compact']}>
	<div class="post-meta">
		<time datetime={post.data.date.toISOString()}>{formatDate(post.data.date)}</time>
		{post.data.tags.length > 0 && (
			<ul class="tag-list" aria-label="Tags">
				{post.data.tags.slice(0, 3).map((tag) => (
					<li>{tag}</li>
				))}
			</ul>
		)}
	</div>
	<h2>
		<a href={href}>{post.data.title}</a>
	</h2>
	<p>{post.data.description}</p>
	<a class="read-link" href={href}>Continue reading</a>
</article>
