---
import ThemeToggle from '../components/ThemeToggle.astro';
import { formatDate, getPublishedPosts } from '../lib/posts';

const posts = await getPublishedPosts();
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>dotmd Feed Concept 17 | Runway Editorial</title>
		<style is:global>
			@import url('https://fonts.googleapis.com/css2?family=Bodoni+Moda:opsz,wght@6..96,600;6..96,800&family=Assistant:wght@400;600;700&display=swap');
			:root { --bg:#f6f5f2; --ink:#111; --muted:#6f6d67; --line:#c8c6be; --accent:#b48d45; --card:#ffffff; }
			:root[data-theme='dark'] { --bg:#121212; --ink:#f3f2ef; --muted:#b2afa8; --line:#3a3936; --accent:#deb770; --card:#1a1a1a; }
			*{box-sizing:border-box}
			body{margin:0;background:var(--bg);color:var(--ink);font-family:'Assistant',sans-serif}
			.page{width:min(1080px,calc(100vw - 2rem));margin:1rem auto 3rem}
			.head{display:grid;grid-template-columns:1fr auto;gap:1rem;align-items:end;border-bottom:1px solid var(--line);padding-bottom:.9rem}
			h1{margin:0;font:800 clamp(2.2rem,8vw,5.5rem)/.86 'Bodoni Moda',serif;letter-spacing:.01em;text-transform:uppercase}
			.subtitle{margin:.45rem 0 0;color:var(--muted);max-width:58ch}
			.controls{display:grid;gap:.45rem;justify-items:end}
			.theme-toggle{border:1px solid var(--line);background:var(--card);color:var(--ink);padding:.32rem .6rem;cursor:pointer}
			.nav{display:flex;gap:.3rem;flex-wrap:wrap;justify-content:flex-end}
			.nav a{text-decoration:none;color:var(--muted);font-size:.73rem;letter-spacing:.08em;padding:.2rem .45rem;border:1px solid transparent}
			.nav a.active{color:var(--ink);border-color:var(--line)}
			.feed{margin-top:1rem;display:grid;gap:.7rem}
			.item{display:grid;grid-template-columns:80px 1fr auto;gap:.8rem;align-items:baseline;padding:.8rem;border:1px solid var(--line);background:var(--card)}
			.num{font:700 1.7rem/.9 'Bodoni Moda',serif;color:var(--accent)}
			.item h2{margin:0;font:700 clamp(1.25rem,3vw,1.9rem)/1.04 'Bodoni Moda',serif}
			.item p{margin:.28rem 0 0;color:var(--muted)}
			.item time{font-size:.75rem;color:var(--muted);text-transform:uppercase}
			.item a{text-decoration:none;color:var(--accent);font-weight:700}
			@media (max-width:830px){.head{grid-template-columns:1fr}.controls{justify-items:start}.nav{justify-content:flex-start}.item{grid-template-columns:1fr}}
		</style>
	</head>
	<body>
		<div class="page">
			<header class="head">
				<div>
					<h1>Runway Feed</h1>
					<p class="subtitle">High-fashion editorial hierarchy with monochrome restraint and metallic accents.</p>
				</div>
				<div class="controls">
					<ThemeToggle storageKey="dotmd-theme-17" />
					<nav class="nav" aria-label="Concept routes">
						<a href="/11">11</a><a href="/12">12</a><a href="/13">13</a><a href="/14">14</a><a href="/15">15</a><a href="/16">16</a><a class="active" href="/17">17</a><a href="/18">18</a><a href="/19">19</a><a href="/20">20</a>
					</nav>
				</div>
			</header>
			<main class="feed">
				{posts.map((post, index) => (
					<article class="item">
						<div class="num">{String(index + 1).padStart(2, '0')}</div>
						<div><h2>{post.data.title}</h2><p>{post.data.description}</p></div>
						<div><time>{formatDate(post.data.date)}</time><br /><a href={`/${post.slug}`}>Read</a></div>
					</article>
				))}
			</main>
		</div>
	</body>
</html>
