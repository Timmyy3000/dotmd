---
import ThemeToggle from '../components/ThemeToggle.astro';
import { formatDate, getPublishedPosts } from '../lib/posts';

const posts = await getPublishedPosts();
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>dotmd Feed Concept 12 | Quiet Temple</title>
		<style is:global>
			@import url('https://fonts.googleapis.com/css2?family=Marcellus&family=Hind:wght@400;500;600&display=swap');
			:root { --bg:#fbfaf5; --ink:#24221d; --muted:#6f695d; --line:#d4ccbc; --card:#fffdf7; --accent:#466b5d; }
			:root[data-theme='dark'] { --bg:#131613; --ink:#f0f3ec; --muted:#adb7aa; --line:#3b433d; --card:#1a1f1b; --accent:#8bc5ab; }
			*{box-sizing:border-box}
			body{margin:0;font-family:'Hind',sans-serif;background:var(--bg);color:var(--ink)}
			.shell{width:min(980px,calc(100vw - 2rem));margin:1.2rem auto 3rem}
			.head{padding:1rem 0;border-bottom:1px solid var(--line)}
			h1{margin:0;font:400 clamp(2rem,7vw,4.6rem)/.95 'Marcellus',serif;letter-spacing:.02em}
			.head p{margin:.45rem 0 0;color:var(--muted);max-width:58ch}
			.row{margin-top:.7rem;display:flex;gap:.45rem;flex-wrap:wrap;align-items:center}
			.theme-toggle{border:1px solid var(--line);background:var(--card);color:var(--ink);padding:.32rem .55rem;cursor:pointer}
			.nav{display:flex;gap:.35rem;flex-wrap:wrap}
			.nav a{text-decoration:none;color:var(--muted);font-size:.74rem;padding:.2rem .45rem;border:1px solid transparent}
			.nav a.active{border-color:var(--line);color:var(--ink)}
			.feed{margin-top:1.1rem;display:grid;gap:.8rem}
			.item{display:grid;grid-template-columns:110px 1fr auto;gap:.9rem;align-items:center;padding:.85rem;border:1px solid var(--line);background:var(--card)}
			.item time{color:var(--accent);font-size:.76rem}
			.item h2{margin:0;font:400 clamp(1.28rem,3vw,1.85rem)/1.08 'Marcellus',serif}
			.item p{margin:.3rem 0 0;color:var(--muted)}
			.item a{text-decoration:none;color:var(--accent);font-weight:600}
			@media (max-width:760px){.item{grid-template-columns:1fr}}
		</style>
	</head>
	<body>
		<div class="shell">
			<header class="head">
				<h1>Quiet Temple Feed</h1>
				<p>Calm literary rhythm with measured spacing, muted palette, and meditative hierarchy.</p>
				<div class="row">
					<ThemeToggle storageKey="dotmd-theme-12" />
					<nav class="nav" aria-label="Concept routes">
						<a href="/11">11</a><a class="active" href="/12">12</a><a href="/13">13</a><a href="/14">14</a><a href="/15">15</a><a href="/16">16</a><a href="/17">17</a><a href="/18">18</a><a href="/19">19</a><a href="/20">20</a>
					</nav>
				</div>
			</header>
			<main class="feed">
				{posts.map((post) => (
					<article class="item">
						<time>{formatDate(post.data.date)}</time>
						<div><h2>{post.data.title}</h2><p>{post.data.description}</p></div>
						<a href={`/${post.slug}`}>Read</a>
					</article>
				))}
			</main>
		</div>
	</body>
</html>
