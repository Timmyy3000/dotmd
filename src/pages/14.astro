---
import ThemeToggle from '../components/ThemeToggle.astro';
import { formatDate, getPublishedPosts } from '../lib/posts';

const posts = await getPublishedPosts();
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>dotmd Feed Concept 14 | Coastal Ledger</title>
		<style is:global>
			@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Manjari:wght@400;700&display=swap');
			:root { --bg:#e9f6fb; --panel:#f9fdff; --ink:#103042; --muted:#4f6f7b; --line:#b9d9e8; --accent:#0f7da5; }
			:root[data-theme='dark'] { --bg:#0a1820; --panel:#102530; --ink:#e8f8ff; --muted:#9db7c3; --line:#284653; --accent:#7ad7ff; }
			*{box-sizing:border-box}
			body{margin:0;font-family:'Manjari',sans-serif;background:radial-gradient(900px 300px at 85% -15%,#b0edff80,transparent 60%),var(--bg);color:var(--ink)}
			.page{width:min(1120px,calc(100vw - 2rem));margin:1rem auto 3rem;display:grid;grid-template-columns:300px 1fr;gap:1rem}
			.side{border:1px solid var(--line);background:var(--panel);padding:1rem;height:fit-content;position:sticky;top:1rem}
			h1{margin:0;font:700 clamp(2rem,5vw,3.5rem)/.95 'Playfair Display',serif}
			.side p{margin:.6rem 0;color:var(--muted)}
			.theme-toggle{border:1px solid var(--line);background:var(--bg);color:var(--ink);padding:.3rem .58rem;cursor:pointer}
			.nav{margin-top:.6rem;display:flex;gap:.35rem;flex-wrap:wrap}
			.nav a{text-decoration:none;font-size:.74rem;color:var(--muted);padding:.2rem .45rem;border:1px solid transparent}
			.nav a.active{border-color:var(--line);color:var(--ink)}
			.feed{display:grid;gap:.8rem}
			.card{border:1px solid var(--line);background:var(--panel);padding:.95rem}
			.card time{font-size:.76rem;color:var(--accent)}
			.card h2{margin:.45rem 0 .35rem;font:700 clamp(1.35rem,3vw,2rem)/1.05 'Playfair Display',serif}
			.card p{margin:0;color:var(--muted)}
			.card a{display:inline-block;margin-top:.68rem;text-decoration:none;color:var(--accent);font-weight:700}
			@media (max-width:900px){.page{grid-template-columns:1fr}.side{position:static}}
		</style>
	</head>
	<body>
		<div class="page">
			<aside class="side">
				<h1>Coastal Ledger</h1>
				<p>Airy magazine treatment with a fixed editorial rail and sea-tone palette.</p>
				<ThemeToggle storageKey="dotmd-theme-14" />
				<nav class="nav" aria-label="Concept routes">
					<a href="/11">11</a><a href="/12">12</a><a href="/13">13</a><a class="active" href="/14">14</a><a href="/15">15</a><a href="/16">16</a><a href="/17">17</a><a href="/18">18</a><a href="/19">19</a><a href="/20">20</a>
				</nav>
			</aside>
			<main class="feed">
				{posts.map((post) => (
					<article class="card">
						<time>{formatDate(post.data.date)}</time>
						<h2>{post.data.title}</h2>
						<p>{post.data.description}</p>
						<a href={`/${post.slug}`}>Dive in</a>
					</article>
				))}
			</main>
		</div>
	</body>
</html>
