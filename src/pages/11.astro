---
import ThemeToggle from '../components/ThemeToggle.astro';
import { formatDate, getPublishedPosts } from '../lib/posts';

const posts = await getPublishedPosts();
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>dotmd Feed Concept 11 | Zine Riot</title>
		<style is:global>
			@import url('https://fonts.googleapis.com/css2?family=Bangers&family=Work+Sans:wght@400;600;800&display=swap');
			:root {
				--bg: #f9f4ea;
				--card: #fff;
				--ink: #131313;
				--accent: #d72638;
				--line: #1d1d1d;
			}
			:root[data-theme='dark'] {
				--bg: #101013;
				--card: #1a1a22;
				--ink: #f7f4ea;
				--accent: #ff6f91;
				--line: #f7f4ea;
			}
			* { box-sizing: border-box; }
			body { margin: 0; font-family: 'Work Sans', sans-serif; background: repeating-linear-gradient(-12deg, #0000 0 28px, #00000008 28px 34px), var(--bg); color: var(--ink); }
			.wrap { width: min(1100px, calc(100vw - 2rem)); margin: 1rem auto 3rem; }
			.head { display: grid; gap: .7rem; }
			h1 { margin: 0; font: 400 clamp(2.7rem, 11vw, 6.5rem) / .88 'Bangers', cursive; letter-spacing: .04em; color: var(--accent); text-shadow: 2px 2px 0 var(--line); }
			.head p { margin: 0; max-width: 60ch; }
			.nav { display:flex; gap:.4rem; flex-wrap:wrap; }
			.nav a { text-decoration:none; padding:.26rem .45rem; border:2px solid var(--line); color:var(--ink); font-size:.75rem; font-weight:700; }
			.nav a.active { background: var(--accent); color: #fff; border-color: var(--accent); }
			.theme-toggle { width: fit-content; border: 2px solid var(--line); background: var(--card); color: var(--ink); padding: .35rem .55rem; font-weight: 700; cursor: pointer; }
			.feed { margin-top: .9rem; display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: .8rem; }
			.card { background: var(--card); border: 2px solid var(--line); padding: .85rem; box-shadow: 7px 7px 0 #00000022; transform: rotate(var(--tilt)); }
			.card:nth-child(odd) { --tilt: -1.2deg; }
			.card:nth-child(even) { --tilt: 1.2deg; }
			.card time { font-size: .74rem; text-transform: uppercase; font-weight: 700; color: var(--accent); }
			.card h2 { margin: .45rem 0 .35rem; font-size: clamp(1.2rem, 3.3vw, 1.8rem); line-height: 1.05; text-transform: uppercase; }
			.card p { margin: 0; }
			.card a { display:inline-block; margin-top:.65rem; color:var(--accent); font-weight:800; text-decoration:none; }
		</style>
	</head>
	<body>
		<div class="wrap">
			<header class="head">
				<h1>Zine Riot Feed</h1>
				<p>Punk zine direction with rough borders, collage tilt, and loud headline energy.</p>
				<ThemeToggle storageKey="dotmd-theme-11" />
				<nav class="nav" aria-label="Concept routes">
					<a href="/11" class="active">11</a><a href="/12">12</a><a href="/13">13</a><a href="/14">14</a><a href="/15">15</a><a href="/16">16</a><a href="/17">17</a><a href="/18">18</a><a href="/19">19</a><a href="/20">20</a>
				</nav>
			</header>
			<main class="feed">
				{posts.map((post) => (
					<article class="card">
						<time>{formatDate(post.data.date)}</time>
						<h2>{post.data.title}</h2>
						<p>{post.data.description}</p>
						<a href={`/${post.slug}`}>Read article</a>
					</article>
				))}
			</main>
		</div>
	</body>
</html>
