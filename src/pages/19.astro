---
import ThemeToggle from '../components/ThemeToggle.astro';
import { formatDate, getPublishedPosts } from '../lib/posts';

const posts = await getPublishedPosts();
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>dotmd Feed Concept 19 | Metro Slab</title>
		<style is:global>
			@import url('https://fonts.googleapis.com/css2?family=Teko:wght@500;600;700&family=Karla:wght@400;700&display=swap');
			:root { --bg:#f2f2f2; --ink:#151515; --muted:#555; --line:#d2d2d2; --accent:#ff3d00; --panel:#fff; }
			:root[data-theme='dark'] { --bg:#111316; --ink:#f1f3f5; --muted:#9ca3ad; --line:#2d3238; --accent:#ff8b4d; --panel:#1a1f25; }
			*{box-sizing:border-box}
			body{margin:0;font-family:'Karla',sans-serif;background:var(--bg);color:var(--ink)}
			.shell{width:min(1180px,calc(100vw - 1.8rem));margin:.9rem auto 3rem}
			.head{display:grid;grid-template-columns:1fr auto;gap:1rem;padding:.9rem;border:1px solid var(--line);background:var(--panel)}
			h1{margin:0;font:700 clamp(2.6rem,9vw,6rem)/.85 'Teko',sans-serif;letter-spacing:.02em;text-transform:uppercase}
			.head p{margin:.4rem 0 0;max-width:60ch;color:var(--muted)}
			.controls{display:grid;gap:.45rem;justify-items:end}
			.theme-toggle,.nav a{border:1px solid var(--line);background:var(--bg);color:var(--ink);padding:.24rem .48rem;text-decoration:none}
			.nav{display:flex;gap:.3rem;flex-wrap:wrap;justify-content:flex-end}
			.nav a.active{background:var(--accent);color:#fff;border-color:var(--accent)}
			.feed{margin-top:.8rem;display:grid;grid-template-columns:repeat(12,1fr);gap:.65rem}
			.card{grid-column:span 4;border:1px solid var(--line);background:var(--panel);padding:.8rem}
			.card:nth-child(1){grid-column:span 8}
			.card:nth-child(5){grid-column:span 8}
			.card time{font-size:.75rem;color:var(--accent)}
			.card h2{margin:.35rem 0 .3rem;font:600 clamp(1.4rem,4vw,2.6rem)/.9 'Teko',sans-serif;text-transform:uppercase}
			.card p{margin:0;color:var(--muted)}
			.card a{display:inline-block;margin-top:.5rem;color:var(--accent);text-decoration:none;font-weight:700}
			@media (max-width:980px){.head{grid-template-columns:1fr}.controls{justify-items:start}.nav{justify-content:flex-start}.card{grid-column:span 12}}
		</style>
	</head>
	<body>
		<div class="shell">
			<header class="head">
				<div>
					<h1>Metro Slab Feed</h1>
					<p>Transit-map structure with slab headlines and modular urban rhythm.</p>
				</div>
				<div class="controls">
					<ThemeToggle storageKey="dotmd-theme-19" />
					<nav class="nav" aria-label="Concept routes">
						<a href="/11">11</a><a href="/12">12</a><a href="/13">13</a><a href="/14">14</a><a href="/15">15</a><a href="/16">16</a><a href="/17">17</a><a href="/18">18</a><a class="active" href="/19">19</a><a href="/20">20</a>
					</nav>
				</div>
			</header>
			<main class="feed">
				{posts.map((post) => (
					<article class="card">
						<time>{formatDate(post.data.date)}</time>
						<h2>{post.data.title}</h2>
						<p>{post.data.description}</p>
						<a href={`/${post.slug}`}>Read route</a>
					</article>
				))}
			</main>
		</div>
	</body>
</html>
